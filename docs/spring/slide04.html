<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>データのプロット</title>
<meta name="author" content="村田 昇"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/css/theme/oer-reveal.css" id="theme"/>

<link rel="stylesheet" href="./reveal.js/plugin/toc-progress/toc-progress.css"/>

<link rel="stylesheet" href="./reveal.js/css/theme/toc-style.css"/>

<link rel="stylesheet" href="./reveal.js/css/theme/oer-reveal.css"/>

<link rel="stylesheet" href="./reveal.js/lib/font/source-sans-pro/source-sans-pro.css"/>

<link rel="stylesheet" href="./myconf.css"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body prefix="dc: http://purl.org/dc/terms/ cc: http://creativecommons.org/ns#">
<div class="reveal">
<div class="slides">
<section id="sec-title-slide" data-state="no-toc-progress">
<!-- This is an HTML template for the title slide. -->
<!-- Embed logos as necessary. -->
<!-- <a class="nooutlink" href="url"><img class="state-background your-logo-class" src="whatever.png" alt="Whatever" /></a> -->
<div class="talk-title">
    <h1 class="no-toc-progress">データのプロット</h1>
</div>
<div class="talk-subtitle">
    <p></p>
</div>
<div class="keyboard-usage">
    <p>(Press <code>?</code> for help, <code>n</code> and <code>p</code> for next and previous slide)</p>
</div>
<div class="talk-author">
  <p>村田 昇<br />
  2019.05.10</p>
</div>

</section>

<section>
<section id="slide-orge15d1c0">
<h2 id="orge15d1c0">データのプロット</h2>
<div class="outline-text-2" id="text-orge15d1c0">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org99d67e6">
<h3 id="org99d67e6">データの可視化</h3>
<p>
データの特徴や傾向を把握するために効果的な方法
</p>
<ul>
<li>Rにはきわめて多彩な作図機能が用意されている</li>
<li><code>package::graphics</code> に含まれる代表的な描画関数を取り上げて解説する</li>
<li>描画関連の関数は色，
線種や線の太さ，
あるいは図中の文字の大きさなどを指定することができる</li>
<li>用意されている多彩なオプションは説明しきれないため，
必要に応じて関数 <code>help()</code> (ヘルプ)と
と関数 <code>example()</code> (例題)
を利用しよう</li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org24a71a6">
<h3 id="org24a71a6">図の保存</h3>
<p>
作成したグラフを保存する
</p>
<ul>
<li>RStudioの機能を使う場合
<ul>
<li>右下ペインの&ldquo;Plots&rdquo;タブの&ldquo;Export&rdquo;をクリック</li>
<li>形式やサイズを指定する <br>
(もしくはクリップボードにコピーもできる)</li>

</ul></li>
<li><p>
コマンドで実行する場合
</p>
<ul>
<li><code>help(pdf)</code></li>
<li><code>help(png)</code></li>
<li><code>help(dev.copy)</code></li>

</ul>
<p>
などを参照
</p></li>

</ul>

<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org284ca69">
<h2 id="org284ca69">基本的な描画</h2>
<div class="outline-text-2" id="text-org284ca69">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org383e681">
<h3 id="org383e681">ベクトルの描画</h3>
<div class="outline-text-3" id="text-org383e681">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org22a7ba6">
<h4 id="org22a7ba6">関数 <code>plot()</code></h4>
<p>
ベクトルデータの描画を行う
</p>
<ul>
<li><p>
基本書式 
</p>
<div class="org-src-container">

<pre  class="src src-R">plot(x, type=<span style="color: #98C379;">"p"</span>, xlim=<span style="color: #E5C07B;">NULL</span>, ylim=<span style="color: #E5C07B;">NULL</span>,
     main=<span style="color: #E5C07B;">NULL</span>, xlab=<span style="color: #E5C07B;">NULL</span>, ylab=<span style="color: #E5C07B;">NULL</span>, ...)
</pre>
</div>
<ul>
<li><code>x</code>: ベクトル</li>
<li><code>type</code>: 描画タイプ．既定値は <code>p</code> (点)．
<code>l</code> (折れ線)など指定可</li>
<li><code>xlim</code>: \(x\) 軸の範囲．既定値は自動的に決定</li>
<li><code>ylim</code>: \(y\) 軸の範囲．既定値は自動的に決定</li>
<li><code>main</code>: 図のタイトル．既定値は空白</li>
<li><code>xlab</code>: \(x\) 軸のラベル名．既定値は <code>Index</code></li>
<li><code>ylab</code>: \(y\) 軸のラベル名．既定値は <code>x</code> のオブジェクト名</li>

</ul></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgac87137">
<h4 id="orgac87137">関数 <code>plot()</code> のオプション</h4>
<ul>
<li>よく利用されるその他のオプション (<code>...</code> の部分)
<ul>
<li><code>col</code>: 色の指定．
<code>"red"</code> や <code>"blue"</code> など． <br>
指定可能な色は関数 <code>colors()</code> で照会できる</li>
<li><code>pch</code>: 点の形．
詳細は <code>help(points)</code> を参照</li>
<li><code>cex</code>: 文字の大きさ．
既定値の何倍にするかを指定</li>
<li><code>lty</code>: 線のタイプ．
実線・破線など．タイプ名もしくは数字で指定．
詳細は <code>help(par)</code> を参照</li>
<li><code>lwd</code>: 線の太さ．数字で指定</li>

</ul></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org80e64ff">
<h4 id="org80e64ff">例: <code>graph-plot.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#12505;&#12463;&#12488;&#12523;&#12398;&#25551;&#30011;</span>
plot(11:20)
</pre>
</div>


<div id="org2e1c1b7" class="figure">
<p><img src="figs/graph-plot1.png" alt="graph-plot1.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgda6ba4c">
<h3 id="orgda6ba4c">関数の描画</h3>
<div class="outline-text-3" id="text-orgda6ba4c">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org257c5d6">
<h4 id="org257c5d6">関数 <code>plot()</code></h4>
<p>
1変数関数の描画を行う
</p>
<ul>
<li><p>
基本書式
</p>
<div class="org-src-container">

<pre  class="src src-R">plot(x, y=0, to=1, ...)
</pre>
</div>
<ul>
<li><code>x</code>: 1変数関数 (関数名)</li>
<li><code>y</code>: \(x\) 軸の左端 (<code>from</code> でも良い)</li>
<li><code>to</code>: \(x\) 軸の右端</li>
<li><code>...</code>: &ldquo;ベクトルの描画&rdquo;と同じオプションが利用可能</li>

</ul></li>
<li><p>
別の関数 <code>f</code> を重ね書きする場合は以下を実行する
</p>
<div class="org-src-container">

<pre  class="src src-R">curve(f, add=<span style="color: #E5C07B;">TRUE</span>, ...)            
</pre>
</div></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org990afbc">
<h4 id="org990afbc">例: <code>graph-plot.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#38306;&#25968;&#12398;&#25551;&#30011;</span>
plot(sin, 0, 4*pi, 
     col=<span style="color: #98C379;">"blue"</span>, <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#12464;&#12521;&#12501;&#12398;&#32218;&#12398;&#33394;</span>
     lwd=2, <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#12464;&#12521;&#12501;&#12398;&#32218;&#12398;&#22826;&#12373;</span>
     ylab=<span style="color: #98C379;">"sin/cos"</span> <span style="color: #5C6370;"># </span><span style="color: #5C6370;">y&#36600;&#12398;&#12521;&#12505;&#12523;</span>
)
curve(cos, 
      add=<span style="color: #E5C07B;">TRUE</span>, <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#12464;&#12521;&#12501;&#12434;&#19978;&#26360;&#12365;</span>
      col=<span style="color: #98C379;">"red"</span>, lwd=2)
x <span style="color: #56B6C2;">&lt;-</span> seq(0, 4*pi, by=0.1)
y <span style="color: #56B6C2;">&lt;-</span> sin(x) + rep_len(c(-0.2, 0.1), length(x))
points(x, y, col=<span style="color: #98C379;">"green"</span>, pch=<span style="color: #98C379;">"*"</span>) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#28857;&#12434;&#36861;&#21152;. pch&#12399;&#28857;&#12398;&#24418;&#12434;&#25351;&#23450;</span>
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgd0da1af">
<h4 id="orgd0da1af"></h4>

<div id="org1bfb070" class="figure">
<p><img src="figs/graph-plot2.png" alt="graph-plot2.png" width="50%" height="50%"> 
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org1e6da4c">
<h4 id="org1e6da4c">例: <code>graph-plot.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#12487;&#12540;&#12479;&#28857;&#12398;&#25551;&#30011;</span>
plot(x, y, type=<span style="color: #98C379;">"p"</span>, pch=<span style="color: #98C379;">"x"</span>, ylim=c(-2,2)) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">ylim&#12391;&#20516;&#22495;&#12434;&#25351;&#23450;</span>
curve(sin, add=<span style="color: #E5C07B;">TRUE</span>, col=<span style="color: #98C379;">"orange"</span>, lwd=2)
lines(x, y, col=<span style="color: #98C379;">"blue"</span>) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#25240;&#12428;&#32218;&#12434;&#36861;&#21152;</span>
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgdb57c1c">
<h4 id="orgdb57c1c"></h4>

<div id="org947da9c" class="figure">
<p><img src="figs/graph-plot3.png" alt="graph-plot3.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orge22809a">
<h3 id="orge22809a">散布図</h3>
<ul>
<li>2種類のデータ \(x_1,\dots,x_N\)
および \(y_1,\dots,y_N\) が与えられたとき，
同じ index を持つ点 \((x_1,y_1),\dotsc,(x_N,y_N)\) を
平面上に描画した図</li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org7b3ebd5">
<h4 id="org7b3ebd5">関数 <code>plot()</code></h4>
<p>
散布図を作成する
</p>
<ul>
<li><p>
基本書式
</p>
<div class="org-src-container">

<pre  class="src src-R">plot(x, y=<span style="color: #E5C07B;">NULL</span>, ...)
</pre>
</div>
<ul>
<li><code>x</code>: 1種類目のデータ \(x_1,\dots,x_N\)</li>
<li><code>y</code>: 2種類目のデータ \(y_1,\dots,y_N\)</li>
<li><code>...</code>: &ldquo;ベクトルの描画&rdquo;と同じオプションが利用可能</li>

</ul></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgfd83117">
<h4 id="orgfd83117">関数 <code>plot()</code></h4>
<p>
データフレーム <code>x</code> の変数A，Bの散布図を作成する
</p>
<ul>
<li><p>
基本書式
</p>
<div class="org-src-container">

<pre  class="src src-R">plot(B ~ A, data=x, ...)
</pre>
</div>
<ul>
<li><code>x</code>: データフレーム</li>
<li><code>A,B</code>: 変数名 (データフレームの列名)</li>

</ul></li>
<li>データフレーム <code>x</code> に対して
<code>plot(x)</code> を実行すると，
すべての変数のペアに対する散布図が
作成される(散布図行列; <code>pairs()</code> 後述)</li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org9babd7c">
<h4 id="org9babd7c">例: <code>graph-plot.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#12487;&#12540;&#12479;&#12501;&#12524;&#12540;&#12512;&#12434;&#29992;&#12356;&#12383;&#25955;&#24067;&#22259; (airquality&#12434;&#21033;&#29992;)</span>
plot(Ozone ~ Wind, data=airquality,
     pch=<span style="color: #98C379;">"*"</span>, col=<span style="color: #98C379;">"red"</span>, cex=2) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">cex&#12399;&#28857;&#12398;&#22823;&#12365;&#12373;&#12398;&#20493;&#29575;&#12434;&#25351;&#23450;</span>
</pre>
</div>


<div id="org11bd1c4" class="figure">
<p><img src="figs/graph-plot4.png" alt="graph-plot4.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org04c2443" data-background="#fef4f4">
<h3 id="org04c2443">演習</h3>
<ul>
<li>前回配布した県別のデータ <code>jpdata</code> を用いて婚姻・離婚率の散布図を描画せよ．
<ul>
<li>jpdata1-sjis/utf8.csv: 県別の対象データ</li>
<li>jpdata2-sjis/utf8.csv: 対象データの内容</li>
<li>jpdata3-sjis/utf8.csv: 県別と地域の対応関係</li>
<li><p>
読み込み方は以下を参照．
</p>
<div class="org-src-container">

<pre  class="src src-R">jpdat <span style="color: #56B6C2;">&lt;-</span> read.csv(file=<span style="color: #98C379;">"jpdata1-sjis.csv"</span>,fileEncoding=<span style="color: #98C379;">"sjis"</span>,row.names=1)
jpval <span style="color: #56B6C2;">&lt;-</span> read.csv(file=<span style="color: #98C379;">"jpdata2-sjis.csv"</span>,fileEncoding=<span style="color: #98C379;">"sjis"</span>)
jpreg <span style="color: #56B6C2;">&lt;-</span> read.csv(file=<span style="color: #98C379;">"jpdata3-sjis.csv"</span>,fileEncoding=<span style="color: #98C379;">"sjis"</span>)
</pre>
</div></li>

</ul></li>
<li>地方別に異なる点の形状を用いた散布図を描け．</li>
<li>それ以外にも様々な散布図を描画してみよう．</li>

</ul>

<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org3e8a8c4">
<h2 id="org3e8a8c4">グラフの文字情報</h2>
<div class="outline-text-2" id="text-org3e8a8c4">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org30fd8f6">
<h3 id="org30fd8f6">凡例の表示</h3>
<div class="outline-text-3" id="text-org30fd8f6">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org1091291">
<h4 id="org1091291">関数 <code>legend()</code></h4>
<p>
グラフに凡例を追加する
</p>
<ul>
<li><p>
基本書式
</p>
<div class="org-src-container">

<pre  class="src src-R">legend(x, y=<span style="color: #E5C07B;">NULL</span>, legend, ...)
</pre>
</div>
<ul>
<li><code>x,y</code>: 凡例の位置を指定 (座標やキーワードで指定が可能)</li>
<li><code>legend</code>: 凡例の文字列ベクトル</li>

</ul></li>
<li>次の実行例で見るように数式を扱うこともできる．</li>
<li>詳細は <code>help(plotmath)</code> を参照</li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org9b37823">
<h4 id="org9b37823">例: <code>graph-legend.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#20961;&#20363;&#12398;&#36861;&#21152;</span>
<span style="color: #61AFEF;">f</span> <span style="color: #56B6C2;">&lt;-</span> <span style="color: #C678DD;">function</span>(x) exp(-x) * cos(x)
plot(f, 0, 2*pi, col=<span style="color: #98C379;">"red"</span>, lwd=2, ylab=<span style="color: #98C379;">""</span>)
<span style="color: #61AFEF;">g</span> <span style="color: #56B6C2;">&lt;-</span> <span style="color: #C678DD;">function</span>(x) exp(-x) * sin(x)
curve(g, lty=2, <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#12464;&#12521;&#12501;&#12398;&#32218;&#12398;&#24418;&#24335; 2&#12399;&#30772;&#32218;</span>
      add=<span style="color: #E5C07B;">TRUE</span>, col=<span style="color: #98C379;">"blue"</span>, lwd=2)
legend(4, <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#20961;&#20363;&#12398;&#24038;&#19978;&#12398;x&#24231;&#27161;</span>
       1, <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#20961;&#20363;&#12398;&#24038;&#19978;&#12398;y&#24231;&#27161;</span>
       legend=c(expression(e^{-x}*cos(x)),expression(e^{-x}*sin(x))),
       lty=c(1,2), lwd=2, col=c(<span style="color: #98C379;">"red"</span>,<span style="color: #98C379;">"blue"</span>), <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#12497;&#12521;&#12513;&#12540;&#12479;&#12399;&#12464;&#12521;&#12501;&#12395;&#28310;&#25312;</span>
       bty=<span style="color: #98C379;">"n"</span>, <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#20961;&#20363;&#12398;&#26528;&#32218;&#12398;&#24418;&#24335;(&#12458;&#12503;&#12471;&#12519;&#12531;) "n"&#12399;&#26528;&#32218;&#12394;&#12375;</span>
       y.intersp=2) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#34892;&#38291;&#12398;&#25351;&#23450;(&#12458;&#12503;&#12471;&#12519;&#12531;)</span>
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgb2dcc79">
<h4 id="orgb2dcc79"></h4>

<div id="org9720a47" class="figure">
<p><img src="figs/graph-legend.png" alt="graph-legend.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org8832f6a">
<h3 id="org8832f6a">日本語に関する注意</h3>
<p>
日本語を含む図で文字化けが起こった場合 <br>
(主にMacOS)
</p>
<ul>
<li><p>
関数 <code>par</code> の <code>family</code> オプションでフォントを指定 <br>
ヒラギノ角ゴシックW4を指定する場合
</p>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #56B6C2;">par</span>(family=<span style="color: #98C379;">"HiraginoSans-W4"</span>)      
</pre>
</div>
<p>
(数字を変えると太さが変わる)
</p></li>
<li>以下のサイトなども参考になる <br>
<a href="https://oku.edu.mie-u.ac.jp/~okumura/stat/font.html">https://oku.edu.mie-u.ac.jp/~okumura/stat/font.html</a></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org8f60cd1">
<h4 id="org8f60cd1"><code>graph-font.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#26085;&#26412;&#35486;&#12501;&#12457;&#12531;&#12488;&#12398;&#25351;&#23450;</span>
<span style="color: #56B6C2;">par</span>(family = <span style="color: #98C379;">"HiraginoSans-W4"</span>) 
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">2018&#24180;&#12398;&#26481;&#20140;&#12398;&#27671;&#20505;&#12487;&#12540;&#12479;&#12395;&#12424;&#12427;&#20363;</span>
mydat <span style="color: #56B6C2;">&lt;-</span> read.csv(<span style="color: #98C379;">"example/tokyo_weather_2018_sjis.csv"</span>,
                  fileEncoding=<span style="color: #98C379;">"sjis"</span>)
<span style="color: #5C6370;">## </span><span style="color: #5C6370;">&#26376;&#12372;&#12392;&#12398;&#24179;&#22343;&#12434;&#12503;&#12525;&#12483;&#12488;&#12377;&#12427;</span>
(x <span style="color: #56B6C2;">&lt;-</span> aggregate(mydat[ ,-c(1,2)], by=list(&#26376; = mydat$&#26376;), FUN=mean))
plot(x$&#27671;&#28201;, type =<span style="color: #98C379;">"b"</span>, lwd=3, col=<span style="color: #98C379;">"green"</span>, ylim=c(0, max(x$&#27671;&#28201;)),
     xlab=<span style="color: #98C379;">"&#26376;"</span>, ylab=<span style="color: #98C379;">""</span>, main=<span style="color: #98C379;">"2018&#24180;&#27671;&#20505;&#12487;&#12540;&#12479;"</span>, axes=<span style="color: #E5C07B;">FALSE</span>) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#36600;&#12399;&#24460;&#12391;</span>
axis(1, 1:12, 1:12);axis(2) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">x,y&#36600;&#12398;&#20316;&#25104;</span>
lines(x$&#38477;&#27700;&#37327;, type=<span style="color: #98C379;">"h"</span>, lwd=3, col=<span style="color: #98C379;">"blue"</span>)
lines(x$&#26085;&#23556;&#37327;, lwd=3, lty=2, col=<span style="color: #98C379;">"red"</span>)
abline(0, 0, lwd=2, lty=<span style="color: #98C379;">"dotted"</span>) <span style="color: #5C6370;">#  </span><span style="color: #5C6370;">y=0&#12398;&#32218;&#12434;&#24341;&#12367;</span>
legend(1, 25, legend=c(<span style="color: #98C379;">"&#27671;&#28201;"</span>,<span style="color: #98C379;">"&#38477;&#27700;&#37327;"</span>,<span style="color: #98C379;">"&#26085;&#23556;&#37327;"</span>),
       col=c(<span style="color: #98C379;">"green"</span>,<span style="color: #98C379;">"blue"</span>,<span style="color: #98C379;">"red"</span>), lwd=3, lty=c(1,1,2))
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org3de5b2c">
<h4 id="org3de5b2c"></h4>

<div id="org55a7a1e" class="figure">
<p><img src="figs/graph-font.png" alt="graph-font.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgac74968" data-background="#fef4f4">
<h3 id="orgac74968">演習</h3>
<ul>
<li>前の演習で作成した散布図に凡例や日本語のタイトルを加えてみよ．</li>

</ul>

<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org950c198">
<h2 id="org950c198">分布の視覚化</h2>
<div class="outline-text-2" id="text-org950c198">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgcc326ac">
<h3 id="orgcc326ac">ヒストグラム</h3>
<ul>
<li>データの値の範囲をいくつかの区間に分割し，
各区間に含まれるデータの個数を棒グラフにしたもの</li>
<li>棒グラフの横幅が区間に対応し, 面積が区間に含まれるデータの個数に比例するグラフを作成する</li>
<li>データの分布の仕方(どのあたりに値が集中しているか, どの程度値にばらつきがあるかなど)を可視化するのに有効</li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org0191ee0">
<h4 id="org0191ee0">関数 <code>hist()</code></h4>
<ul>
<li><p>
基本書式
</p>
<div class="org-src-container">

<pre  class="src src-R">hist(x, breaks, freq)      
</pre>
</div>
<ul>
<li><code>x</code>: ベクトル</li>
<li><code>breaks</code>: 区間の分割の仕方を指定．
数字を指定するとデータ範囲をその数字に近い個数に等分割する．
既定値はSturgesの公式．      
詳細はヘルプを参照</li>
<li><code>freq</code>: <code>TRUE</code> を指定すると縦軸はデータ数，
<code>FALSE</code> を指定すると縦軸はデータ数/全データ数．
<code>TRUE</code></li>
<li><code>...</code>: 関数 <code>plot()</code> で指定できるオプションが利用可能</li>

</ul></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org3cccbc3">
<h4 id="org3cccbc3">例: <code>graph-hist.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#38306;&#25968;hist&#12395;&#12424;&#12427;&#12498;&#12473;&#12488;&#12464;&#12521;&#12512;&#12398;&#20316;&#22259;</span>
mydat <span style="color: #56B6C2;">&lt;-</span> read.csv(<span style="color: #98C379;">"example/tokyo_weather_2018_sjis.csv"</span>, 
                  fileEncoding=<span style="color: #98C379;">"sjis"</span>)
<span style="color: #56B6C2;">par</span>(family = <span style="color: #98C379;">"HiraginoSans-W4"</span>) 
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#22522;&#26412;&#30340;&#12394;&#12498;&#12473;&#12488;&#12464;&#12521;&#12512;</span>
<span style="color: #5C6370;"># </span><span style="color: #5C6370;">hist(mydat$&#27671;&#28201;)</span>
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#12499;&#12531;&#12398;&#25968;&#12434;&#25351;&#23450;&#12377;&#12427;&#22580;&#21512;</span>
hist(mydat$&#27671;&#28201;, 
     xlab=<span style="color: #98C379;">""</span>, ylab=<span style="color: #98C379;">"&#38971;&#24230;"</span>,
     breaks=25, <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#12499;&#12531;&#12398;&#25968;&#12434;&#32004;25&#12395;&#35373;&#23450;</span>
     labels=<span style="color: #E5C07B;">TRUE</span>, <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#21508;&#12499;&#12531;&#12398;&#24230;&#25968;&#12434;&#34920;&#31034;</span>
     col=<span style="color: #98C379;">"green"</span>, main=<span style="color: #98C379;">"2018&#24180;&#27671;&#28201;&#12498;&#12473;&#12488;&#12464;&#12521;&#12512;"</span>) 
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgcc87829">
<h4 id="orgcc87829"></h4>

<div id="org57c13e1" class="figure">
<p><img src="figs/graph-hist1.png" alt="graph-hist1.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orge4a66ca">
<h4 id="orge4a66ca">例: <code>graph-hist.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#38306;&#25968;hist&#12395;&#12424;&#12427;&#12498;&#12473;&#12488;&#12464;&#12521;&#12512;&#12398;&#20316;&#22259;</span>
mydat <span style="color: #56B6C2;">&lt;-</span> read.csv(<span style="color: #98C379;">"example/tokyo_weather_2018_sjis.csv"</span>,
                  fileEncoding=<span style="color: #98C379;">"sjis"</span>)
<span style="color: #56B6C2;">par</span>(family = <span style="color: #98C379;">"HiraginoSans-W4"</span>) 
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#23494;&#24230;&#12391;&#12398;&#34920;&#31034;</span>
hist(mydat$&#39080;&#36895;, freq=<span style="color: #E5C07B;">FALSE</span>, <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#20840;&#20307;&#12395;&#23550;&#12377;&#12427;&#21106;&#21512;&#12391;&#34920;&#31034;</span>
     xlab=<span style="color: #98C379;">""</span>, ylab=<span style="color: #98C379;">"&#23494;&#24230;"</span>, breaks=25, 
     col=<span style="color: #98C379;">"lightblue"</span>, border=<span style="color: #98C379;">"cyan"</span>, <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#38263;&#26041;&#24418;&#12398;&#22659;&#30028;&#12398;&#33394;</span>
     main=<span style="color: #98C379;">"2018&#24180;&#39080;&#36895;&#12498;&#12473;&#12488;&#12464;&#12521;&#12512;"</span>) 
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org13d89b5">
<h4 id="org13d89b5"></h4>

<div id="org8892600" class="figure">
<p><img src="figs/graph-hist2.png" alt="graph-hist2.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org618818b">
<h3 id="org618818b">箱ひげ図</h3>
<ul>
<li>データの中心，散らばり具合および外れ値を考察するための図 
(ヒストグラムの簡易版)</li>
<li>複数のデータの分布の比較の際に有効
<ul>
<li>太線で表示された中央値(第2四分位点)</li>
<li>第1四分位点を下端・第3四分位点を上端とする長方形(箱)</li>
<li>第1四分位点・第3四分位点からそれぞれ箱の長さの1.5倍以内にあるデータのうちの
最小の値・最大の値を下端・上端とする直線(ひげ)</li>

</ul></li>
<li>ひげの外側のデータは点で表示される</li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org3b8fcea">
<h4 id="org3b8fcea">関数 <code>boxplot()</code></h4>
<p>
箱ひげ図を描画する
</p>
<ul>
<li><p>
基本書式
</p>
<div class="org-src-container">

<pre  class="src src-R">boxplot(x, ...)      
</pre>
</div>
<ul>
<li><code>x</code>: ベクトルまたはデータフレーム
<ul>
<li>ベクトルに対しては単一の箱ひげ図</li>
<li>データフレーム対しては列ごとの箱ひげ図</li>

</ul></li>
<li><code>...</code>: 関数 <code>plot()</code> と同様のオプションを指定可能</li>

</ul></li>
<li><p>
データフレーム <code>x</code> の
変数 <code>B</code> を変数 <code>A</code> (質的変数; 性別・植物の種類など)で分類する場合
</p>
<div class="org-src-container">

<pre  class="src src-R">boxplot(B ~ A, data=x, ...)
</pre>
</div></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org6d0b9af">
<h4 id="org6d0b9af">例: <code>graph-boxplot.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#38306;&#25968;boxplot&#12395;&#12424;&#12427;&#31665;&#12402;&#12370;&#22259;&#12398;&#20316;&#22259;</span>
mydat <span style="color: #56B6C2;">&lt;-</span> read.csv(<span style="color: #98C379;">"example/tokyo_weather_2018_sjis.csv"</span>,
                  fileEncoding=<span style="color: #98C379;">"sjis"</span>)
<span style="color: #56B6C2;">par</span>(family = <span style="color: #98C379;">"HiraginoSans-W4"</span>) 
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#22522;&#26412;&#30340;&#12394;&#31665;&#12402;&#12370;&#22259;</span>
boxplot(mydat[ ,-c(1,2)]) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#26376;&#26085;&#12399;&#38500;&#12367;</span>
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgc971394">
<h4 id="orgc971394"></h4>

<div id="org9f265e5" class="figure">
<p><img src="figs/graph-boxplot1.png" alt="graph-boxplot1.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgaa14f7e">
<h4 id="orgaa14f7e">例: <code>graph-boxplot.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#38306;&#25968;boxplot&#12395;&#12424;&#12427;&#31665;&#12402;&#12370;&#22259;&#12398;&#20316;&#22259;</span>
mydat <span style="color: #56B6C2;">&lt;-</span> read.csv(<span style="color: #98C379;">"example/tokyo_weather_2018_sjis.csv"</span>,
                  fileEncoding=<span style="color: #98C379;">"sjis"</span>)
<span style="color: #56B6C2;">par</span>(family = <span style="color: #98C379;">"HiraginoSans-W4"</span>) 
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#26376;&#12372;&#12392;&#12395;&#27671;&#28201;&#12434;&#20998;&#39006;</span>
boxplot(&#27671;&#28201; ~ &#26376;, data=mydat, col=<span style="color: #98C379;">"orange"</span>, main=<span style="color: #98C379;">"&#26376;&#12372;&#12392;&#12398;&#27671;&#28201;"</span>)
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#22259;&#12434;&#22238;&#36578;</span>
<span style="color: #5C6370;">## </span><span style="color: #5C6370;">boxplot(&#27671;&#28201; ~ &#26376;, data=mydat,</span>
<span style="color: #5C6370;">## </span><span style="color: #5C6370;">     col="purple", main="&#26376;&#12372;&#12392;&#12398;&#27671;&#28201;", horizontal=TRUE)</span>
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org7437952">
<h4 id="org7437952"></h4>

<div id="orge6bac00" class="figure">
<p><img src="figs/graph-boxplot2.png" alt="graph-boxplot2.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org4f511ac" data-background="#fef4f4">
<h3 id="org4f511ac">演習</h3>
<ul>
<li><p>
<code>jpdata</code> を用いてヒストグラムや箱ひげ図を作成せよ．
(タイトル・色などは適当に調節せよ)
</p>
<ul>
<li>各変数のヒストグラム</li>
<li>地方ごとの各変数の箱ひげ図</li>

</ul>
<p>
など
</p></li>

</ul>

<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-orgda10641">
<h2 id="orgda10641">さまざまな視覚化</h2>
<div class="outline-text-2" id="text-orgda10641">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgb06b4af">
<h3 id="orgb06b4af">棒グラフ</h3>
<div class="outline-text-3" id="text-orgb06b4af">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orge67ef4f">
<h4 id="orge67ef4f">関数 <code>barplot()</code></h4>
<p>
棒グラフを作成する
</p>
<ul>
<li><p>
基本書式
</p>
<div class="org-src-container">

<pre  class="src src-R">barplot(x,width=1,space=<span style="color: #E5C07B;">NULL</span>,beside=<span style="color: #E5C07B;">FALSE</span>,
        legend.text=<span style="color: #E5C07B;">NULL</span>,args.legend=<span style="color: #E5C07B;">NULL</span>, ...)
</pre>
</div>
<ul>
<li><code>x</code>: ベクトルまたは行列 (データフレームは不可)</li>
<li><code>width</code>: 棒の幅</li>
<li><code>space</code>: 棒グラフ間・変数間のスペース</li>
<li><code>legend.text</code>: 凡例</li>
<li><code>beside</code>: 複数の変数を縦に並べるか・横に並べるか</li>
<li><code>args.legend</code>: 関数 <code>legend</code> に渡す引数</li>
<li><code>...</code>: 関数 <code>plot()</code> で指定できるオプションが利用可能</li>

</ul></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgce876ee">
<h4 id="orgce876ee">例: <code>graph-barplot.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#38306;&#25968;barplot&#12395;&#12424;&#12427;&#26834;&#12464;&#12521;&#12501;&#12398;&#20316;&#22259;</span>
mydat <span style="color: #56B6C2;">&lt;-</span> read.csv(<span style="color: #98C379;">"example/tokyo_weather_2018_sjis.csv"</span>,
                  fileEncoding=<span style="color: #98C379;">"sjis"</span>)
<span style="color: #56B6C2;">par</span>(family = <span style="color: #98C379;">"HiraginoSans-W4"</span>) 
<span style="color: #5C6370;">## </span><span style="color: #5C6370;">&#26376;&#12372;&#12392;&#12395;&#21508;&#22793;&#25968;&#12398;&#24179;&#22343;&#12434;&#35336;&#31639;</span>
x <span style="color: #56B6C2;">&lt;-</span> aggregate(mydat[ ,-c(1,2)], by=list(&#26376; = mydat$&#26376;), FUN=mean)
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#22522;&#26412;&#30340;&#12394;&#26834;&#12464;&#12521;&#12501;</span>
barplot(x[,2], <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#26834;&#12398;&#39640;&#12373;&#12398;&#12505;&#12463;&#12488;&#12523;</span>
        col=<span style="color: #98C379;">"slateblue"</span>, <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#26834;&#12398;&#33394;&#12398;&#25351;&#23450;</span>
        names.arg=x[,1], <span style="color: #5C6370;"># </span><span style="color: #5C6370;">x&#36600;&#12398;&#12521;&#12505;&#12523;</span>
        main=names(x)[2]) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#12479;&#12452;&#12488;&#12523;</span>
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org1ba5a5d">
<h4 id="org1ba5a5d"></h4>

<div id="org1c9405a" class="figure">
<p><img src="figs/graph-barplot1.png" alt="graph-barplot1.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org18418aa">
<h4 id="org18418aa">例: <code>graph-barplot.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#38306;&#25968;barplot&#12395;&#12424;&#12427;&#26834;&#12464;&#12521;&#12501;&#12398;&#20316;&#22259;</span>
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#35079;&#25968;&#12398;&#26834;&#12464;&#12521;&#12501;</span>
<span style="color: #56B6C2;">par</span>(family = <span style="color: #98C379;">"HiraginoSans-W4"</span>) 
barplot(as.matrix(x[ ,-1]), <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#31532;1&#24341;&#25968;&#12399;&#12505;&#12463;&#12488;&#12523;&#12414;&#12383;&#12399;&#34892;&#21015;</span>
        col=rainbow(12)[c(8:1,12:9)], <span style="color: #5C6370;"># </span><span style="color: #5C6370;">12&#33394;&#12395;&#33394;&#20998;&#12369;</span>
        beside=<span style="color: #E5C07B;">TRUE</span>, <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#26834;&#12464;&#12521;&#12501;&#12434;&#27178;&#12395;&#20006;&#12409;&#12427;</span>
        space=c(1.5, 3), <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#26834;&#12464;&#12521;&#12501;&#38291;&#12539;&#22793;&#25968;&#38291;&#12398;&#12473;&#12506;&#12540;&#12473;&#12434;&#25351;&#23450;</span>
        legend.text=paste0(x[ ,1], <span style="color: #98C379;">"&#26376;"</span>), <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#20961;&#20363;&#12398;&#25351;&#23450;</span>
        args.legend=list(ncol = 2)) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#20961;&#20363;&#12434;2&#21015;&#12395;&#12375;&#12390;&#34920;&#31034;</span>
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orge0acffe">
<h4 id="orge0acffe"></h4>

<div id="org97f9ea9" class="figure">
<p><img src="figs/graph-barplot2.png" alt="graph-barplot2.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org2299b7a">
<h3 id="org2299b7a">円グラフ</h3>
<div class="outline-text-3" id="text-org2299b7a">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgf4e96a6">
<h4 id="orgf4e96a6">関数 <code>pie()</code></h4>
<p>
円グラフを作成する
</p>
<ul>
<li><p>
基本書式
</p>
<div class="org-src-container">

<pre  class="src src-R">pie(x, clockwise=<span style="color: #E5C07B;">FALSE</span>, ...)
</pre>
</div>
<ul>
<li><code>x</code>: ベクトル</li>
<li><code>clockwise</code>: 時計回りに書くか否か</li>
<li><code>...</code>: 関数 <code>plot()</code> で指定できるオプションが利用可能</li>

</ul></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org8905796">
<h4 id="org8905796">例: <code>graph-pie.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#38306;&#25968;pie&#12395;&#12424;&#12427;&#20870;&#12464;&#12521;&#12501;&#12398;&#20316;&#22259;</span>
mydat <span style="color: #56B6C2;">&lt;-</span> read.csv(<span style="color: #98C379;">"example/tokyo_weather_2018_sjis.csv"</span>,
                  fileEncoding=<span style="color: #98C379;">"sjis"</span>)
<span style="color: #56B6C2;">par</span>(family = <span style="color: #98C379;">"HiraginoSans-W4"</span>) 
z <span style="color: #56B6C2;">&lt;-</span> hist(mydat$&#26085;&#23556;&#37327;, breaks=5, plot=<span style="color: #E5C07B;">FALSE</span>) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">5&#12388;&#31243;&#24230;&#12395;&#20998;&#39006;</span>
x <span style="color: #56B6C2;">&lt;-</span> z$count
y <span style="color: #56B6C2;">&lt;-</span> z$breaks
names(x) <span style="color: #56B6C2;">&lt;-</span> paste(y[-length(y)], y[-1], sep=<span style="color: #98C379;">"-"</span>)
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#22522;&#26412;&#30340;&#12394;&#20870;&#12464;&#12521;&#12501;</span>
<span style="color: #5C6370;">## </span><span style="color: #5C6370;">pie(x, col=gray(seq(0,1,length=length(x))))</span>
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#21521;&#12365;&#12392;&#33394;&#12434;&#35519;&#25972;</span>
pie(x, clockwise=<span style="color: #E5C07B;">TRUE</span>, col=heat.colors(length(x),rev=<span style="color: #E5C07B;">TRUE</span>), 
    main=<span style="color: #98C379;">"2018&#24180;&#26085;&#23556;&#37327;"</span>)
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgfc34e93">
<h4 id="orgfc34e93"></h4>

<div id="org7a1b0a4" class="figure">
<p><img src="figs/graph-pie.png" alt="graph-pie.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgbee5ce1" data-background="#fef4f4">
<h3 id="orgbee5ce1">演習</h3>
<ul>
<li><p>
<code>jpdata</code> を用いて棒グラフや円グラフを作成せよ．
(タイトル・色などは適当に調節せよ)
</p>
<ul>
<li>県別の男女の勤務時間を並べた棒グラフ</li>
<li>地方ごとの人口の比率の円グラフ</li>

</ul>
<p>
など
</p></li>

</ul>

<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-orgab3fa05">
<h2 id="orgab3fa05">多次元の表示</h2>
<div class="outline-text-2" id="text-orgab3fa05">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org82b003e">
<h3 id="org82b003e">散布図行列</h3>
<div class="outline-text-3" id="text-org82b003e">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgd8c9c12">
<h4 id="orgd8c9c12">関数 <code>pairs()</code></h4>
<p>
散布図行列を作成する
</p>
<ul>
<li><p>
基本書式
</p>
<div class="org-src-container">

<pre  class="src src-R">pairs(x, ...)
plot(x,...)
</pre>
</div>
<p>
(すべての列のペアに対する散布図を行列状に並べる)
</p>
<ul>
<li><code>x</code>: データフレーム</li>

</ul></li>
<li><p>
変数 <code>A1</code>, \(\dots\), <code>Ak</code> (列名)のみ考える場合
</p>
<div class="org-src-container">

<pre  class="src src-R">pairs(~ A1 + ... + Ak, data=x, ...)
plot(~ A1 + ... + Ak, data=x, ...)
</pre>
</div></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgf751b3d">
<h4 id="orgf751b3d">例: <code>graph-pairs.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#38306;&#25968;pairs&#12395;&#12424;&#12427;&#25955;&#24067;&#22259;&#12398;&#20316;&#22259;</span>
mydat <span style="color: #56B6C2;">&lt;-</span> read.csv(<span style="color: #98C379;">"example/tokyo_weather_2018_sjis.csv"</span>,
                  fileEncoding=<span style="color: #98C379;">"sjis"</span>)
<span style="color: #56B6C2;">par</span>(family = <span style="color: #98C379;">"HiraginoSans-W4"</span>) 
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#22522;&#26412;&#30340;&#12394;&#25955;&#24067;&#22259;</span>
<span style="color: #5C6370;">## </span><span style="color: #5C6370;">pairs(mydat[,-c(1,2)], col="blue")</span>
<span style="color: #5C6370;">## </span><span style="color: #5C6370;">plot(mydat[,-c(1,2)], col="blue")&#12391;&#12418;&#21516;&#12376;&#22259;&#12364;&#25551;&#12369;&#12427;</span>
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#34920;&#31034;&#12377;&#12427;&#38917;&#30446;&#12434;&#25351;&#23450;</span>
pairs(~ &#27671;&#28201; + &#26085;&#23556;&#37327; + &#39080;&#36895;, data=mydat,
      col=rainbow(12)[mydat$&#26376;]) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#26376;&#27598;&#12395;&#30064;&#12394;&#12427;&#33394;&#12391;&#34920;&#31034;</span>
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgcb20aa9">
<h4 id="orgcb20aa9"></h4>

<div id="orgdfd4f82" class="figure">
<p><img src="figs/graph-pairs.png" alt="graph-pairs.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org8718e22">
<h3 id="org8718e22">3次元のグラフ</h3>
<div class="outline-text-3" id="text-org8718e22">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org0c40db3">
<h4 id="org0c40db3">関数 <code>persp()</code></h4>
<p>
3次元のグラフを2次元に射影した俯瞰図を描く
</p>
<ul>
<li><p>
基本書式
</p>
<div class="org-src-container">

<pre  class="src src-R">persp(x, y, z, theta=0, phi=15, expand=1)      
</pre>
</div>
<ul>
<li><code>x,y,z</code>: \(x,y,z\) 座標<br>
(<code>z</code> は
点(<code>x[i],y[j]</code>)に対応する値を
\((i,j)\) 成分とする行列で与える必要がある)</li>
<li><code>theta,phi</code>: 俯瞰の方向を指定する極座標</li>
<li><code>expand</code>: \(z\) 軸の拡大度</li>
<li><code>...</code>: 関数 <code>plot()</code> で指定できるオプションが利用可能</li>

</ul></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org9727d15">
<h4 id="org9727d15">例: <code>graph-plot3d.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#38306;&#25968;persp&#12395;&#12424;&#12427;2&#22793;&#25968;&#38306;&#25968;&#12398;&#20463;&#30640;&#22259;</span>
<span style="color: #61AFEF;">f</span> <span style="color: #56B6C2;">&lt;-</span> <span style="color: #C678DD;">function</span>(x,y) x^2 - y^2
x <span style="color: #56B6C2;">&lt;-</span> seq(-3, 3, length=51) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">x&#24231;&#27161;&#12398;&#23450;&#32681;&#22495;&#12398;&#20998;&#21106;</span>
y <span style="color: #56B6C2;">&lt;-</span> seq(-3, 3, length=51) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">y&#24231;&#27161;&#12398;&#23450;&#32681;&#22495;&#12398;&#20998;&#21106;</span>
z <span style="color: #56B6C2;">&lt;-</span> outer(x, y, f) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">z&#24231;&#27161;&#12398;&#35336;&#31639;</span>
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#22522;&#26412;&#30340;&#12394;&#20463;&#30640;&#22259;</span>
<span style="color: #5C6370;">## </span><span style="color: #5C6370;">persp(x, y, z, col="lightblue")</span>
<span style="color: #5C6370;">### </span><span style="color: #5C6370;">&#20463;&#30640;&#12377;&#12427;&#21521;&#12365;&#12434;&#25351;&#23450;</span>
persp(x, y, z, theta=30, phi=30, expand=0.5, col=<span style="color: #98C379;">"royalblue"</span>,
      main = expression(z==x^2-y^2))
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgf4fd828">
<h4 id="orgf4fd828"></h4>

<div id="org104d3b2" class="figure">
<p><img src="figs/graph-plot3d1.png" alt="graph-plot3d1.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgad4fdf5">
<h4 id="orgad4fdf5">多様な3次元のグラフのためのパッケージがある．</h4>
<p>
以下は <code>scatterplot3d()</code> の例
</p>
<ul>
<li><p>
基本書式
</p>
<div class="org-src-container">

<pre  class="src src-R">scatterplot3d(x, color, angle=40)      
</pre>
</div>
<ul>
<li><code>x</code>: \(x,y,z\) 座標を指定するデータフレーム<br>
(関数 <code>persp()</code> のように直接指定することも可能)</li>
<li><code>color</code>: 色を指定(<code>col</code> ではない). 既定値は黒</li>
<li><code>angle</code>: \(x\) 軸と \(y\) 軸の間の角度</li>
<li><code>...</code>: 関数 <code>plot()</code> で指定できるオプションが利用可能</li>

</ul></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgf628d94">
<h4 id="orgf628d94">例: <code>graph-plot3d.r</code></h4>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #5C6370;">### </span><span style="color: #5C6370;">3&#27425;&#20803;&#25955;&#24067;&#22259;(&#12497;&#12483;&#12465;&#12540;&#12472;scatterplot3d&#12434;&#21033;&#29992;)</span>
<span style="color: #5C6370;">## </span><span style="color: #5C6370;">install.packages("scatterplot3d") # &#21021;&#12417;&#12390;&#20351;&#12358;&#26178;&#12395;&#24517;&#35201;</span>
<span style="color: #56B6C2;">require</span>(scatterplot3d) <span style="color: #5C6370;"># </span><span style="color: #5C6370;">&#12497;&#12483;&#12465;&#12540;&#12472;&#12398;&#12525;&#12540;&#12489;</span>
mydat <span style="color: #56B6C2;">&lt;-</span> read.csv(<span style="color: #98C379;">"example/tokyo_weather_2018_sjis.csv"</span>, 
                  fileEncoding=<span style="color: #98C379;">"sjis"</span>)
<span style="color: #56B6C2;">par</span>(family = <span style="color: #98C379;">"HiraginoSans-W4"</span>) 
dat <span style="color: #56B6C2;">&lt;-</span> subset(mydat, select=c(&#39080;&#36895;, &#26085;&#23556;&#37327;, &#27671;&#28201;))
scatterplot3d(dat, pch=4, color=<span style="color: #98C379;">"orchid"</span>)
</pre>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org3f205e8">
<h4 id="org3f205e8"></h4>

<div id="org0d29754" class="figure">
<p><img src="figs/graph-plot3d2.png" alt="graph-plot3d2.png" width="50%" height="50%">
</p>
</div>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org98cb1ec" data-background="#fef4f4">
<h3 id="org98cb1ec">演習</h3>
<ul>
<li><code>jpdata</code> を用いて3次元の散布図を作成せよ．</li>

</ul>

<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org971c4dc">
<h2 id="org971c4dc">その他</h2>
<div class="outline-text-2" id="text-org971c4dc">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org55576db">
<h3 id="org55576db">プロット環境の設定</h3>
<div class="outline-text-3" id="text-org55576db">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org4c96db9">
<h4 id="org4c96db9">関数 <code>par()</code></h4>
<p>
プロット環境の設定(複数図の配置, 余白の設定)をする
</p>
<ul>
<li><p>
基本書式
</p>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #56B6C2;">par</span>(tag=value)
</pre>
</div>
<ul>
<li><code>tag</code>: グラフィックスパラメータ</li>

</ul></li>
<li>プロットの際の線の種類や色, 点の形等の既定値を設定することができる</li>
<li>設定可能なグラフィックスパラメータは <code>help(par)</code> を参照</li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
</div>
</div>
<script src="./reveal.js/js/reveal.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: true,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
mouseWheel: true,
fragmentInURL: true,
pdfSeparateFragments: false,

overview: true,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'fade', // default/cube/page/concave/zoom/linear/fade/none
transitionSpeed: 'default',
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
{ src: './reveal.js/plugin/coursemod/coursemod.js', async: true },
{ src: './reveal.js/plugin/quiz/js/quiz.js', async: true, callback: function() { prepareQuizzes({preventUnanswered: true}); } },
{ src: './reveal.js/plugin/jump/jump.js', async: true },
 { src: './reveal.js/plugin/toc-progress/toc-progress.js', async: true, callback: function() { toc_progress.initialize('reduce', 'rgba(120,138,130,0.2)'); toc_progress.create(); } },
 { src: './reveal.js/plugin/anything/anything.js' },
 { src: './reveal.js/plugin/audio-slideshow/audio-slideshow.js', condition: function( ) { return !!document.body.classList && !Reveal.isSpeakerNotes(); } },
 { src: './reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } }]
,audio: {
    advance: -1, autoplay: true, defaultDuration: 0, defaultAudios: false, playerOpacity: 0.3, playerStyle: 'position: fixed; bottom: 9.5vh; left: 0%; width: 30%; height:30px; z-index: 33;' },
  anything: [
	{className: "animate",  initialize: (function(container, options){
		Reveal.addEventListener( 'fragmentshown', function( event ) {
			if (typeof event.fragment.beginElement === "function" ) {
				event.fragment.beginElement();
			}
		});
		Reveal.addEventListener( 'fragmenthidden', function( event ) {
			if (event.fragment.hasAttribute('data-reverse') ) {
				var reverse = event.fragment.parentElement.querySelector('[id=\"' + event.fragment.getAttribute('data-reverse') + '\"]');
				if ( reverse && typeof reverse.beginElement === "function" ) {
					reverse.beginElement();
				}
			}
		});
		if ( container.getAttribute("data-svg-src") ) {
			var xhr = new XMLHttpRequest();
			xhr.onload = function() {
				if (xhr.readyState === 4) {
					var svg = container.querySelector('svg');
					container.removeChild( svg );
					container.innerHTML = xhr.responseText + container.innerHTML;
					if ( svg ) {
						container.querySelector('svg').innerHTML = container.querySelector('svg').innerHTML + svg.innerHTML;
					}
				}
				else {
					console.warn( "Failed to get file. ReadyState: " + xhr.readyState + ", Status: " + xhr.status);
				}
			};
			xhr.open( 'GET', container.getAttribute("data-svg-src"), true );
			xhr.send();
		}
	}) },
	{className: "randomPic",
	 defaults: {imgalt: "Dummy alt text",
		    imgcaption: "Image by {name}",
		    choices: [ {name: "dummyname", path: "dummypath"} ]},
	 initialize: (function(container, options){
	     var choice = Math.trunc( Math.random()*(options.choices.length) );
	     var img = "<img data-src='" + options.choices[choice].path + "' alt='" + options.choices[choice].imgalt + "' />";
	     var caption = options.imgcaption.replace(new RegExp('\{name\}', 'gm'), options.choices[choice].name);
	     container.innerHTML = img + caption;
	 }) },
	{className: "notes",
	 initialize: (function(container, options){
	     container.addEventListener('click', function(e) { RevealNotes.open(); });
	 }) }
],
  coursemod: { enabled: true, shown: false }});
</script>
</body>
</html>
