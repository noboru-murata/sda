<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>ベクトル・行列の演算と関数</title>
<meta name="author" content="村田 昇"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/css/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/css/theme/oer-reveal.css" id="theme"/>

<link rel="stylesheet" href="./reveal.js/plugin/toc-progress/toc-progress.css"/>

<link rel="stylesheet" href="./reveal.js/css/theme/toc-style.css"/>

<link rel="stylesheet" href="./reveal.js/lib/font/source-sans-pro/source-sans-pro.css"/>

<link rel="stylesheet" href="./reveal.js/css/theme/oer-reveal.css"/>

<link rel="stylesheet" href="./myconf.css"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = './reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body prefix="dc: http://purl.org/dc/terms/ cc: http://creativecommons.org/ns#">
<div class="reveal">
<div class="slides">
<section id="sec-title-slide" data-state="no-toc-progress">
<!-- This is an HTML template for the title slide. -->
<!-- Embed logos as necessary. -->
<!-- <a class="nooutlink" href="url"><img class="state-background your-logo-class" src="whatever.png" alt="Whatever" /></a> -->
<div class="talk-title">
    <h1 class="no-toc-progress">ベクトル・行列の演算と関数</h1>
</div>
<div class="talk-subtitle">
    <p></p>
</div>
<div class="keyboard-usage">
    <p>(Press <code>?</code> for help, <code>n</code> and <code>p</code> for next and previous slide)</p>
</div>
<div class="talk-author">
  <p>村田 昇<br />
  2020.04.24</p>
</div>

</section>
<section>
<section id="slide-org5961727">
<h2 id="org5961727">ベクトルの計算</h2>
<div class="outline-text-2" id="text-org5961727">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgb379ada">
<h3 id="orgb379ada">ベクトルの表記</h3>
<ul>
<li><p>
ベクトルは太字で，要素は下付き添字で表す
</p>

<div>
\begin{equation}
  \boldsymbol{a}
  =(a_{1},a_{2},\dotsc,a_{k})
\end{equation}

</div>

<div class="org-src-container">

<pre  class="src src-R">a <span style="color: #8be9fd;">&lt;-</span> c(a1,a2,...,ak) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">k&#27425;&#20803;&#12505;&#12463;&#12488;&#12523;&#12398;&#20316;&#25104;</span>
</pre>
</div></li>
<li><p>
別の書き方:
</p>

<div>
\begin{equation}
  (\boldsymbol{a})_{i}
  =\text{(ベクトル $\boldsymbol{a}$ の第 $i$ 成分)}  
\end{equation}

</div></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgf09bbce">
<h3 id="orgf09bbce">ベクトルの加法</h3>
<ul>
<li><p>
<b>同じ長さのベクトル</b> の和および差: <br>
<i>数値の和と差のように扱うことができる</i>
</p>

<div>
\begin{equation}
  \boldsymbol{a}\pm\boldsymbol{b}
  =(a_{1}\pm b_{1},a_{2}\pm b_{2},\dotsc,a_{k}\pm b_{k})
\end{equation}

</div>
<div>
\begin{equation}
  (\boldsymbol{a}\pm\boldsymbol{b})_{i}
  =a_{i}\pm b_{i}
\end{equation}

</div>

<div class="org-src-container">

<pre  class="src src-R">a + b <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#21516;&#12376;&#38263;&#12373;&#12398;&#12505;&#12463;&#12488;&#12523; a,b &#12398;&#21644;</span>
a - b <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#12505;&#12463;&#12488;&#12523;&#12398;&#24046;</span>
</pre>
</div></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org6224920">
<h3 id="org6224920">ベクトルの乗法</h3>
<ul>
<li><b>同じ長さの2つのベクトル</b> の乗法: <br>
<i>(2種類ある)</i>
<ul>
<li>成分ごとの積 (Hadamard積; 要素積)</li>
<li>ベクトルの内積</li>

</ul></li>
<li>データ解析ではどちらも良く用いられる</li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org1eb79ce">
<h3 id="org1eb79ce">Hadamard積</h3>
<ul>
<li><p>
<b>同じ長さのベクトル</b> の成分ごとの積
</p>

<div>
\begin{equation}
  \boldsymbol{a}\circ\boldsymbol{b}
  =(a_{1}b_{1},a_{2}b_{2},\dotsc,a_{k}b_{k})
\end{equation}

</div>
<div>
\begin{equation}
  (\boldsymbol{a}\circ\boldsymbol{b})_{i}
  =a_{i}b_{i}
\end{equation}

</div>

<div class="org-src-container">

<pre  class="src src-R">a * b <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#12505;&#12463;&#12488;&#12523;&#12398;&#25104;&#20998;&#12372;&#12392;&#12398;&#31309;</span>
a / b <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#25104;&#20998;&#12372;&#12392;&#12398;&#21830;&#12418;&#35336;&#31639;&#21487;</span>
</pre>
</div></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org0faea44">
<h3 id="org0faea44">内積</h3>
<ul>
<li><p>
<b>同じ長さのベクトル</b> の内積
</p>

<div>
\begin{align}
  \boldsymbol{a}\cdot\boldsymbol{b}
  &=a_{1}b_{1}+a_{2}b_{2}+\dotsb+a_{k}b_{k}\\
  &=\sum_{i=1}^{k}a_{i}b_{i}
\end{align}

</div>

<div class="org-src-container">

<pre  class="src src-R">a <span style="color: #8be9fd;">%*%</span> b <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#12505;&#12463;&#12488;&#12523;&#12398;&#20869;&#31309;</span>
</pre>
</div></li>

</ul>

<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org9d564af">
<h2 id="org9d564af">行列の計算</h2>
<div class="outline-text-2" id="text-org9d564af">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org6dbe9e8">
<h3 id="org6dbe9e8">行列の表記</h3>
<ul>
<li><p>
行列は大文字で，要素は下付き添字で表す
</p>

<div>
\begin{equation}
  A
  =
  \begin{pmatrix}
    a_{11}&a_{12}&\dots&a_{1n}\\
    a_{21}&a_{22}&\dots&a_{2n}\\
    \vdots&&\ddots&\vdots\\
    a_{m1}&a_{m2}&\dots&a_{mn}
  \end{pmatrix}
\end{equation}

</div>

<div class="org-src-container">

<pre  class="src src-R">A <span style="color: #8be9fd;">&lt;-</span> matrix(c(a11,a21,...,amn),m,n) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">m x n &#34892;&#21015;&#12398;&#20316;&#25104;</span>
</pre>
</div></li>
<li><p>
別の書き方:
</p>

<div>
\begin{equation}
  (A)_{ij}
  =\text{(行列 $A$ の $ij$ 成分)}
\end{equation}

</div></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org136d967">
<h3 id="org136d967">行列の加法</h3>
<ul>
<li><p>
<b>同じ大きさの行列</b> の和および差: <br>
<i>ベクトルと同じように記述することができる</i>
</p>

<div>
\begin{equation}
  (A\pm B)_{ij}=a_{ij}\pm b_{ij}
\end{equation}

</div>

<div class="org-src-container">

<pre  class="src src-R">A + B <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#21516;&#12376;&#12469;&#12452;&#12474;&#12398;&#34892;&#21015;&#12398;&#21644;</span>
A - B <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#34892;&#21015;&#12398;&#24046;</span>
</pre>
</div></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org603e6a5">
<h3 id="org603e6a5">行列の乗法</h3>
<ul>
<li>2つの行列の乗法: <br>
<i>(2種類ある)</i>
<ul>
<li><b>同じ大きさの行列</b> の成分ごとの積 (Hadamard積; 要素積)</li>
<li><b>\(n\times m\) 型行列と \(m\times l\) 型行列</b> の積</li>

</ul></li>
<li>データ解析ではどちらも良く用いられる</li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org3ff1ba9">
<h3 id="org3ff1ba9">Hadamard積</h3>
<ul>
<li><p>
<b>同じ大きさの行列</b> の成分ごとの積
</p>

<div>
\begin{equation}
  (A\circ B)_{ij}=a_{ij}b_{ij}
\end{equation}

</div>

<div class="org-src-container">

<pre  class="src src-R">A * B <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#34892;&#21015;&#12398;&#25104;&#20998;&#12372;&#12392;&#12398;&#31309;</span>
A / B <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#25104;&#20998;&#12372;&#12392;&#12398;&#21830;&#12418;&#35336;&#31639;&#21487;</span>
</pre>
</div></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org81ea7f7">
<h3 id="org81ea7f7">行列の積</h3>
<ul>
<li><p>
<b>\(n\times m\) 型行列 \(A\) と \(m\times l\) 型行列 \(B\)</b> の積
</p>

<div>
\begin{equation}
  (AB)_{ij}=\sum_{k=1}^{m}a_{ik}b_{kj}
  \quad\text{($AB$は$n\times l$行列)}
\end{equation}

</div>

<div class="org-src-container">

<pre  class="src src-R">A <span style="color: #8be9fd;">%*%</span> B <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#34892;&#21015;&#12398;&#31309;</span>
</pre>
</div></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgbe343a0">
<h3 id="orgbe343a0">行列式とトレース</h3>
<ul>
<li><p>
<b>\(n\) 次正方行列</b> \(A\) の行列式 \(\det(A)\)
</p>
<div class="org-src-container">

<pre  class="src src-R">det(A) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#34892;&#21015;&#24335;</span>
</pre>
</div></li>
<li><p>
<b>\(n\) 次正方行列</b> \(A\) のトレース(対角成分の総和)
</p>

<div>
\begin{equation}
  \mathrm{trace}(A)=\sum_{i=1}^{n}a_{ii}
\end{equation}

</div>

<p>
関数は用意されていないので以下を利用:
</p>
<ul>
<li>関数 <code>diag()</code>: 行列の対角成分を取り出す(ベクトル)</li>
<li>関数 <code>sum()</code>: ベクトルの総和を計算する</li>

</ul>
<div class="org-src-container">

<pre  class="src src-R">sum(diag(A)) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#34892;&#21015;&#12398;&#12488;&#12524;&#12540;&#12473;</span>
</pre>
</div></li>

</ul>

<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-orge3a16c3" data-background="#fef4f4">
<h2 id="orge3a16c3">演習</h2>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org2ae1493" data-background="#fef4f4">
<h3 id="org2ae1493">例題</h3>
<ul>
<li><p>
適当な2次正方行列 \(A\) で
Hamilton-Cayleyの定理
</p>

<div>
\begin{equation}
  A^2-\mathrm{trace}(A)A+\det(A)E_{2}=O_{2}
\end{equation}

</div>

<p>
の成立を確認せよ．<br>
ただし \(E_{2}\) は2次単位行列，\(O_{2}\) は2次正方零行列
</p></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org89f151f" data-background="#fef4f4">
<h3 id="org89f151f">解答例</h3>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #6272a4;">## </span><span style="color: #6272a4;">&#34892;&#21015;&#12434;&#20316;&#25104; (&#22909;&#12365;&#12395;&#35373;&#23450;&#12375;&#12390;&#12424;&#12356;)</span>
(A <span style="color: #8be9fd;">&lt;-</span> matrix(1:4,2,2)-diag(rep(3,2)))
</pre>
</div>

<pre class="example">
     [,1] [,2]
[1,]   -2    3
[2,]    2    1
</pre>


<div class="org-src-container">

<pre  class="src src-R"><span style="color: #6272a4;">## </span><span style="color: #6272a4;">&#24038;&#36794;&#12434;&#35336;&#31639;</span>
A<span style="color: #8be9fd;">%*%</span>A - sum(diag(A)) * A + det(A) * diag(rep(1,2))
</pre>
</div>

<pre class="example">
             [,1]         [,2]
[1,] 1.776357e-15 0.000000e+00
[2,] 0.000000e+00 1.776357e-15
</pre>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org9407b91" data-background="#fef4f4">
<h3 id="org9407b91">練習問題</h3>
<ul>
<li>1から10の2乗値からなるベクトルを作成せよ．</li>
<li>1から10までの和を計算せよ．</li>
<li>行列を用いて九九の表を作成せよ．</li>
<li><p>
30度の回転行列を2回乗ずると60度の回転行列となることを確認せよ．
</p>

<div>
\begin{equation}
  \text{(回転行列)}
  =
  \begin{pmatrix}
    \cos(\theta)&-\sin(\theta)\\
    \sin(\theta)& \cos(\theta)
  \end{pmatrix}
\end{equation}

</div></li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org79c530e">
<h2 id="org79c530e">ベクトルと行列の計算</h2>
<div class="outline-text-2" id="text-org79c530e">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orga12bd34">
<h3 id="orga12bd34">ベクトルと行列の乗法</h3>
<ul>
<li>列(縦)ベクトル・行(横)ベクトルという <b>区別はない</b></li>
<li>行列とベクトルの順序で適切に判断される</li>
<li><p>
計算結果は <b>行列</b> で表現される
</p>
<div class="org-src-container">

<pre  class="src src-R">A <span style="color: #8be9fd;">&lt;-</span> matrix(1:4,2,2); b <span style="color: #8be9fd;">&lt;-</span> c(5,6) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#34892;&#21015;&#12392;&#12505;&#12463;&#12488;&#12523;&#12434;&#20316;&#25104;</span>
</pre>
</div>

<div class="org-src-container">

<pre  class="src src-R">A <span style="color: #8be9fd;">%*%</span> b <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#34892;&#21015; x &#12505;&#12463;&#12488;&#12523; = &#21015;&#12505;&#12463;&#12488;&#12523;</span>
</pre>
</div>

<pre class="example">
     [,1]
[1,]   23
[2,]   34
</pre>


<div class="org-src-container">

<pre  class="src src-R">b <span style="color: #8be9fd;">%*%</span> A <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#12505;&#12463;&#12488;&#12523; x &#34892;&#21015; = &#34892;&#12505;&#12463;&#12488;&#12523;</span>
</pre>
</div>

<pre class="example">
     [,1] [,2]
[1,]   17   39
</pre></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgdf760c3">
<h3 id="orgdf760c3">連立1次方程式の解法</h3>
<ul>
<li><p>
連立1次方程式
</p>
<ul>
<li>\(A\) : \(n\) 次正則行列</li>
<li>\(\boldsymbol{b},\boldsymbol{x}\) : \(n\) 次元列ベクトル</li>

</ul>

<div>
\begin{align}
  A\boldsymbol{x}&=\boldsymbol{b}
  &&\text{(連立1次方程式)}\\
  \boldsymbol{x}&=A^{-1}\boldsymbol{b}
  &&\text{(解;$A$が正則な場合)}
\end{align}

</div></li>
<li><p>
解を求めるには関数 <code>solve()</code> を利用する
</p>
<div class="org-src-container">

<pre  class="src src-R">x <span style="color: #8be9fd;">&lt;-</span> solve(A, b)    
</pre>
</div></li>
<li>ベクトル \(\boldsymbol{b}\) の代わりに行列も扱える</li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org184f454">
<h3 id="org184f454">逆行列</h3>
<ul>
<li><p>
正則な \(n\) 次正方行列 \(A\) の逆行列 \(A^{-1}\)
</p>

<div>
\begin{equation}
  AA^{-1}=A^{-1}A=E_{n}
  \quad\text{($E_{n}$は$n$次単位行列)}
\end{equation}

</div></li>
<li><p>
関数 <code>solve()</code> を利用して求めることができる
</p>

<div>
\begin{align}
  AX&=E_{n}\\
  X&=A^{-1}E_{n}=A^{-1}
\end{align}

</div>

<div class="org-src-container">

<pre  class="src src-R">solve(A,B) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">AX=B &#12398;&#35299;X&#12434;&#27714;&#12417;&#12427;</span>
solve(A) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#36870;&#34892;&#21015; (B&#12364;&#21336;&#20301;&#34892;&#21015;&#12398;&#22580;&#21512;&#30465;&#30053;&#12391;&#12365;&#12427;)</span>
</pre>
</div></li>
<li><i>(他にもいくつか方法は用意されている)</i></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org948ff6f">
<h3 id="org948ff6f">関数の適用</h3>
<ul>
<li>ベクトルや行列に関数( \(\sin,\exp,\dots\) など)を適用すると
成分ごとに計算した結果が返される</li>
<li><p>
<span style="color:green;">ベクトル \(\boldsymbol{a}\) ，行列 \(A\) に関数 \(\sin\) を適用</span>
</p>

<div>
\begin{equation}
  (\sin(\boldsymbol{a}))_{i}=\sin(a_{i})
\end{equation}

</div>

<div class="org-src-container">

<pre  class="src src-R">sin(a) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#25104;&#20998;&#12372;&#12392;&#12395;&#35336;&#31639;&#12373;&#12428;&#12427;&#65294;sin(a)[i]=sin(a[i])</span>
</pre>
</div>

<div>
\begin{equation}
  (\sin(A))_{ij}=\sin(a_{ij})
\end{equation}

</div>

<div class="org-src-container">

<pre  class="src src-R">sin(A) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#25104;&#20998;&#12372;&#12392;&#12395;&#35336;&#31639;&#12373;&#12428;&#12427;&#65294;sin(A)[i,j]=sin(A[i,j])</span>
</pre>
</div></li>

</ul>

<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org6ddea65" data-background="#fef4f4">
<h2 id="org6ddea65">演習</h2>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org74acb09" data-background="#fef4f4">
<h3 id="org74acb09">例題</h3>
<ul>
<li><p>
適当な3次正方行列 \(A\) と3次元ベクトル \(\boldsymbol{b}\) を作成して
\(\boldsymbol{x}\) に関する連立1次方程式
</p>

<div>
\begin{equation}
  A\boldsymbol{x}=\boldsymbol{b}
\end{equation}

</div>

<p>
を解け
</p></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org8fa06fd" data-background="#fef4f4">
<h3 id="org8fa06fd">解答例</h3>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #6272a4;">## </span><span style="color: #6272a4;">&#34892;&#21015;&#12392;&#12505;&#12463;&#12488;&#12523;&#12434;&#20316;&#25104; (&#22909;&#12365;&#12395;&#35373;&#23450;&#12375;&#12390;&#12424;&#12356;)</span>
<span style="color: #6272a4;">## </span><span style="color: #6272a4;">rnorm(9) &#12399;&#27491;&#35215;&#20081;&#25968;&#12434;9&#12388;&#20316;&#25104;&#12377;&#12427;(&#31532;5&#22238;&#12391;&#35443;&#12375;&#12367;&#35500;&#26126;)</span>
(A <span style="color: #8be9fd;">&lt;-</span> matrix(rnorm(9),3,3)+diag(rep(1,3)))
(b <span style="color: #8be9fd;">&lt;-</span> 1:3)
</pre>
</div>

<pre class="example">
            [,1]         [,2]      [,3]
[1,]  0.95806389  0.808749844 0.5104417
[2,] -0.70685179  0.715650742 0.7166396
[3,] -0.01866261 -0.007213141 0.6195651
[1] 1 2 3
</pre>


<div class="org-src-container">

<pre  class="src src-R"><span style="color: #6272a4;">## </span><span style="color: #6272a4;">&#35299;&#12434;&#35336;&#31639;</span>
(x <span style="color: #8be9fd;">&lt;-</span> solve(A,b))
A<span style="color: #8be9fd;">%*%</span>x <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#32080;&#26524;&#12398;&#30906;&#35469;(b &#12395;&#12394;&#12427;&#12399;&#12378;)</span>
</pre>
</div>

<pre class="example">
[1]  0.1046642 -1.9314000  4.8227730
     [,1]
[1,]    1
[2,]    2
[3,]    3
</pre>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org6b7592e" data-background="#fef4f4">
<h3 id="org6b7592e">練習問題</h3>
<ul>
<li>1から10の2乗値からなるベクトルを作成せよ．</li>
<li>2次元ベクトルを回転行列で変換しても長さが変わらないことを確かめよ．</li>
<li><p>
例題の \(A\) と \(\boldsymbol{b}\) を用いて
</p>
<div class="org-src-container">

<pre  class="src src-R">A <span style="color: #8be9fd;">%*%</span> b + b <span style="color: #8be9fd;">%*%</span> A   
</pre>
</div>
<p>
を計算するとエラーになるが，何故そうなるか理由を考えよ．
</p></li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org75ae63c">
<h2 id="org75ae63c">関数の定義</h2>
<div class="outline-text-2" id="text-org75ae63c">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org2906aff">
<h3 id="org2906aff">自作関数</h3>
<ul>
<li>他の言語と同様にRでも関数を定義できる</li>
<li>関数の定義には関数 <code>function()</code> を利用する</li>
<li><p>
<span style="color:green;">半径 r から球の体積と表面積を求める関数</span>
</p>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #50fa7b;">myfunc</span> <span style="color: #8be9fd;">&lt;-</span> <span style="color: #ff79c6;">function</span>(r){
    V <span style="color: #8be9fd;">&lt;-</span> (4/3) * pi * r^3 <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#29699;&#12398;&#20307;&#31309;</span>
    S <span style="color: #8be9fd;">&lt;-</span> 4 * pi * r^2     <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#29699;&#12398;&#34920;&#38754;&#31309;</span>
    out <span style="color: #8be9fd;">&lt;-</span> c(V,S) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#36820;&#12426;&#20516;&#12398;&#12505;&#12463;&#12488;&#12523;&#12434;&#20316;&#12427;</span>
    names(out) <span style="color: #8be9fd;">&lt;-</span> c(<span style="color: #f1fa8c;">"volume"</span>, <span style="color: #f1fa8c;">"area"</span>) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#36820;&#12426;&#20516;&#12398;&#35201;&#32032;&#12395;&#21517;&#21069;&#12434;&#20184;&#12369;&#12427;</span>
    <span style="color: #ff79c6;">return</span>(out) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#20516;&#12434;&#36820;&#12377;</span>
}
myfunc(1) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#23455;&#34892;</span>
</pre>
</div>

<pre class="example">
 volume     area 
4.18879 12.56637
</pre></li>

</ul>

<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-org9997f49">
<h2 id="org9997f49">制御構造</h2>
<div class="outline-text-2" id="text-org9997f49">
</div>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org4204941">
<h3 id="org4204941">制御文</h3>
<ul>
<li>最適化や数値計算などを行うためには，
条件分岐や繰り返しを行うための仕組みが必要となる</li>
<li>R言語を含む多くの計算機言語では
<ul>
<li><code>if</code>  (条件分岐)</li>
<li><code>for</code>  (繰り返し・回数指定)</li>
<li><code>while</code>  (繰り返し・条件指定)</li>

</ul></li>
<li>これを <b>制御文</b> と言う</li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org224f726">
<h3 id="org224f726"><code>if</code> 文</h3>
<ul>
<li><p>
条件Aが <b>真</b> のときプログラムXを実行する
</p>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #ff79c6;">if</span>(&#26465;&#20214;A) &#12503;&#12525;&#12464;&#12521;&#12512;X
</pre>
</div></li>
<li><p>
上記の <code>if</code> 文に条件Aが <b>偽</b> のときプログラムYを実行することを追加する
</p>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #ff79c6;">if</span>(&#26465;&#20214;A) &#12503;&#12525;&#12464;&#12521;&#12512;X <span style="color: #ff79c6;">else</span> &#12503;&#12525;&#12464;&#12521;&#12512;Y    
</pre>
</div></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org4cc4201">
<h3 id="org4cc4201"><code>if</code> 文の例</h3>
<ul>
<li><p>
<span style="color:green;">20200724が19で割り切れるか?</span>
</p>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #ff79c6;">if</span>(20200724 %% 19 == 0) {<span style="color: #6272a4;"># </span><span style="color: #6272a4;">%% &#12399;&#20313;&#12426;&#12434;&#35336;&#31639;</span>
    print(<span style="color: #f1fa8c;">"&#21106;&#12426;&#20999;&#12428;&#12414;&#12377;"</span>)
    print(20200724 <span style="color: #8be9fd;">%/%</span> 19) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#21830;&#12434;&#34920;&#31034;</span>
} <span style="color: #ff79c6;">else</span> { <span style="color: #6272a4;"># </span><span style="color: #6272a4;">{}&#12391;&#22258;&#12414;&#12428;&#12383;&#12502;&#12525;&#12483;&#12463;&#12364;1&#12388;&#12398;&#12503;&#12525;&#12464;&#12521;&#12512;</span>
    print(<span style="color: #f1fa8c;">"&#21106;&#12426;&#20999;&#12428;&#12414;&#12379;&#12435;"</span>)
    print(20200724 %% 19) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#20313;&#12426;&#12434;&#34920;&#31034;</span>
} 
</pre>
</div>

<pre class="example">
[1] "割り切れます"
[1] 1063196
</pre></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org44138e6">
<h3 id="org44138e6"><code>for</code> 文</h3>
<ul>
<li><p>
ベクトル <code>V</code> の要素を <b>順に</b> 変数 <code>i</code> に代入して
プログラムXを繰り返し実行する
</p>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #ff79c6;">for</span>(i <span style="color: #ff79c6;">in</span> V) &#12503;&#12525;&#12464;&#12521;&#12512;X
</pre>
</div></li>
<li>プログラムXは変数 <code>i</code> によって実行内容が変わる</li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org063cd05">
<h3 id="org063cd05"><code>for</code> 文の例</h3>
<ul>
<li><p>
<span style="color:green;">アルファベットの20,15,11,25,15番目を表示</span>
</p>
<div class="org-src-container">

<pre  class="src src-R">print(LETTERS) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">LETTERS &#12505;&#12463;&#12488;&#12523;&#12398;&#20869;&#23481;&#12434;&#34920;&#31034;</span>
<span style="color: #ff79c6;">for</span>(i <span style="color: #ff79c6;">in</span> c(20,15,11,25,15)) {
    print(LETTERS[i]) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#38918;&#30058;&#12395;&#34920;&#31034;</span>
}
</pre>
</div>

<pre class="example">
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K" "L" "M"
[14] "N" "O" "P" "Q" "R" "S" "T" "U" "V" "W" "X" "Y" "Z"
[1] "T"
[1] "O"
[1] "K"
[1] "Y"
[1] "O"
</pre></li>

</ul>

<div class="slide-footer"><br></div>
</section>
<section id="slide-orgb4e0dac">
<h3 id="orgb4e0dac"><code>while</code> 文</h3>
<ul>
<li><p>
条件Aが <b>真</b> である限りプログラムXを繰り返す
</p>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #ff79c6;">while</span>(&#26465;&#20214;A) &#12503;&#12525;&#12464;&#12521;&#12512;X
</pre>
</div></li>
<li>プログラムXは実行するたびに実行内容が変わり，
いつか条件Aが満たされなくなるように書く</li>
<li><i>(<code>repeat</code> 文というものもある)</i></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orga8f3e54">
<h3 id="orga8f3e54"><code>while</code> 文の例</h3>
<ul>
<li><p>
<span style="color:green;">20200809を素因数分解する</span>
</p>
<div class="org-src-container">

<pre  class="src src-R">n <span style="color: #8be9fd;">&lt;-</span> 20200809 <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#20998;&#35299;&#12398;&#23550;&#35937;</span>
p <span style="color: #8be9fd;">&lt;-</span> 2 <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#26368;&#21021;&#12395;&#35519;&#12409;&#12427;&#25968;</span>
<span style="color: #ff79c6;">while</span>(n != 1){ <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#21830;&#12364;1&#12395;&#12394;&#12427;&#12414;&#12391;&#35336;&#31639;&#12377;&#12427;</span>
    <span style="color: #ff79c6;">for</span>(i <span style="color: #ff79c6;">in</span> p:n){ <span style="color: #6272a4;"># </span><span style="color: #6272a4;">p&#12363;&#12425;n&#12414;&#12391;&#38918;&#12395;&#35519;&#12409;&#12427;</span>
        <span style="color: #ff79c6;">if</span>(n%%i == 0) { <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#20313;&#12426;&#12364;0&#12363;&#30906;&#35469;</span>
            print(i) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#21106;&#12426;&#20999;&#12387;&#12383;&#25968;&#12434;&#34920;&#31034;</span>
            n <span style="color: #8be9fd;">&lt;-</span> n/i <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#21830;&#12434;&#35336;&#31639;&#12375;&#12390;&#20998;&#35299;&#12398;&#23550;&#35937;&#12434;&#26356;&#26032;</span>
            p <span style="color: #8be9fd;">&lt;-</span> i <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#26368;&#21021;&#12395;&#35519;&#12409;&#12427;&#25968;&#12434;&#26356;&#26032;</span>
            <span style="color: #ff79c6;">break</span> <span style="color: #6272a4;"># </span><span style="color: #6272a4;">for&#25991;&#12434;&#36884;&#20013;&#12391;&#32066;&#20102;</span>
        }  
    }
}
</pre>
</div>

<pre class="example">
[1] 3
[1] 31
[1] 281
[1] 773
</pre></li>

</ul>

<div class="slide-footer"><br></div>
</section>
</section>
<section>
<section id="slide-orgee582d2" data-background="#fef4f4">
<h2 id="orgee582d2">演習</h2>
<div class="slide-footer"><br></div>
</section>
<section id="slide-org7e89221" data-background="#fef4f4">
<h3 id="org7e89221">例題</h3>
<ul>
<li>三角形の3辺の長さ \(x,y,z\) を与えると
面積 \(S\) を計算する関数を作成せよ．</li>
<li><p>
参考: <b>ヘロンの公式</b> より
</p>

<div>
\begin{equation}
  S=\sqrt{s(s-x)(s-y)(s-z)},\qquad
  s=\frac{x+y+z}{2}
\end{equation}

</div>

<p>
が成り立つ．
</p></li>

</ul>
<div class="slide-footer"><br></div>
</section>
<section id="slide-orgec5509b" data-background="#fef4f4">
<h3 id="orgec5509b">解答例</h3>
<div class="org-src-container">

<pre  class="src src-R"><span style="color: #50fa7b;">area</span> <span style="color: #8be9fd;">&lt;-</span> <span style="color: #ff79c6;">function</span>(x,y,z){
    s <span style="color: #8be9fd;">&lt;-</span> (x+y+z)/2
    S <span style="color: #8be9fd;">&lt;-</span> (s*(s-x)*(s-y)*(s-z))^(1/2)
    <span style="color: #6272a4;">## </span><span style="color: #6272a4;">S &lt;- sqrt(s*(s-x)*(s-y)*(s-z)) # &#24179;&#26041;&#26681;&#12434;&#27714;&#12417;&#12427;&#38306;&#25968;&#12434;&#29992;&#12356;&#12390;&#12418;&#33391;&#12356;</span>
  <span style="color: #ff79c6;">return</span>(S)
}
area(3,4,5) <span style="color: #6272a4;"># </span><span style="color: #6272a4;">&#30452;&#35282;&#19977;&#35282;&#24418;&#12391;&#26908;&#31639;</span>
area(12,13,5)
</pre>
</div>

<pre class="example">
[1] 6
[1] 30
</pre>

<div class="slide-footer"><br></div>
</section>
<section id="slide-org6d64a93" data-background="#fef4f4">
<h3 id="org6d64a93">演習</h3>
<ul>
<li>非負の整数 \(n\) の階乗 \(n!\) を求める関数を作成せよ．</li>
<li><p>
整数 \(n\) の Fibonacci数を求める関数を作成せよ．
</p>

<div>
\begin{align}
  F_{0}&=0\\
  F_{1}&=1\\
  F_{n}&=F_{n-1}+F_{n-2}
\end{align}

</div></li>
<li>行列 \(X\) が与えられたとき，各列の平均を計算する関数を作成せよ．</li>
<li>前問で \(X\) がベクトルの場合にはその平均を計算するように修正せよ．<br>
<i>(関数 <code>is.vector()</code> が利用できる)</i></li>

</ul>
<div class="slide-footer"><br></div>
</section>
</section>
</div>
</div>
<script src="./reveal.js/js/reveal.js"></script>
<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

controls: true,
progress: true,
history: true,
center: true,
slideNumber: 'c',
rollingLinks: false,
keyboard: true,
mouseWheel: true,
fragmentInURL: true,
hashOneBasedIndex: false,
pdfSeparateFragments: false,

overview: true,

theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
transition: Reveal.getQueryHash().transition || 'fade', // see README of reveal.js for options
transitionSpeed: 'default',

// Optional libraries used to extend reveal.js
dependencies: [
 { src: './reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './reveal.js/plugin/search/search.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: './reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } }]

});
</script>
</body>
</html>
